<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<floater
  legacy_header_height="18"
  background_visible="true"
  default_tab_group="1"
  follows="all"
  height="350"
  layout="topleft"
  left="0"
  name="nearby_chat"
  title="Nearby Chat"
  top="0"
  can_dock="false"
  can_close="true"
  can_minimize="false"
  can_tear_off="true"
  single_instance="true"
  save_rect="true"
  save_visibility="true"
  save_dock_state="true"
  visible="false"
  width="394"
  can_resize="true"
  min_width="250"
  min_height="150">
  <floater.string name="chatbox_label">To nearby chat</floater.string>
  <layout_stack
    border_size="0"
    animate="false"
    follows="top|left|right"
    clip="false"
    height="20"
    right="-3"
    left_pad="0"
    layout="topleft"
    orientation="horizontal"
    name="ls_control_panel"
    top="20"
    left="3">
    <layout_panel
      name="lp_translate_btn"
      auto_resize="false"
      user_resize="false"
      top="0"
      layout="topleft"
      height="20"
      width="26"
      follows="left|top">
      <button
      follows="left|top"
      top="0"
      width="24"
      height="20"
      left_delta="2"
      image_overlay="TabIcon_Translate_Off"
      control_name="TranslateChat"
      is_toggle="true"
      image_hover_unselected="Toolbar_Middle_Over"
      image_selected="Toolbar_Middle_Selected"
      image_unselected="Toolbar_Middle_Off"
      tool_tip="Use selected translation service"
      name="translate_btn"/>
    </layout_panel>
     <layout_panel
      name="lp_chat_history_btn"
      auto_resize="false"
      user_resize="false"
      layout="topleft"
      height="20"
      width="26"
      follows="left|top">
      <button
       follows="left|top"
       top="0"
       width="24"
       height="20"
       left_delta="2"
       image_overlay="Chat_History"
       image_hover_unselected="Toolbar_Middle_Over"
       image_selected="Toolbar_Middle_Selected"
       image_unselected="Toolbar_Middle_Off"
       tool_tip="Open the nearby chat transcript."
       name="chat_history_btn"/>
     </layout_panel>
     <layout_panel
      name="lp_chat_history_muted_btn"
      auto_resize="false"
      user_resize="false"
      top="0"
      layout="topleft"
      height="20"
      width="26"
      follows="left|top">
      <button
       follows="left|top"
       top="0"
       width="24"
       height="20"
       left_delta="2"
       image_overlay="Muted_Chat"
       control_name="FSShowMutedChatHistory"
       is_toggle="true"
       image_hover_unselected="Toolbar_Middle_Over"
       image_selected="Toolbar_Middle_Selected"
       image_unselected="Toolbar_Middle_Off"
       tool_tip="Shows the muted chat in nearby chat transcript."
       name="chat_history_muted_btn"/>
    </layout_panel>
     <layout_panel
      name="lp_options_btn"
      auto_resize="false"
      user_resize="false"
      top="0"
      layout="topleft"
      height="20"
      width="26"
      follows="left|top">
      <menu_button
       menu_filename="menu_fs_chat_options.xml"
       follows="left|top"
       top="0"
       width="24"
       height="20"
       left_delta="2"
       image_overlay="Conv_toolbar_sort"
       image_hover_unselected="Toolbar_Middle_Over"
       image_selected="Toolbar_Middle_Selected"
       image_unselected="Toolbar_Middle_Off"
       tool_tip="Chat Options"
       name="chat_options_btn"/>
    </layout_panel>
    <layout_panel
      name="lp_bar"
      auto_resize="true"
      user_resize="false"
      top="0"
      layout="topleft"
      height="20"
      follows="left|top|right">
      <icon
        follows="left|right"
        image_name="Toolbar_Middle_Off"
        left="2"
        name="dummy_icon"
        top="0"
        height="20"
        right="-1"/>
    </layout_panel>

  </layout_stack>
  <layout_stack
    tab_group="1"
    animate="false"
    follows="all"
    height="308"
    width="394"
    layout="topleft"
    orientation="horizontal"
    name="ls_chat"
    top="40"
    left="0">
    <layout_panel
      name="panel_im_control_lp"
      left="0"
      top="0"
      bottom="-1"
      right="0"
      user_resize="true">
      <layout_stack
        animate="false"
        default_tab_group="2"
        follows="all"
        height="304"
        width="394"
        layout="topleft"
        orientation="vertical"
        name="im_panels"
        top="4"
        left="0"
        right="0">
        <layout_panel
          name="chat_holder">
          <fs_chat_history
           invisibility_control="FSShowMutedChatHistory"
           font="SansSerifSmall"
           follows="all"
           name="chat_history"
           parse_highlights="true"
           parse_urls="true"
           right="-4"
           left="0"
           top="0"
           bottom="-1" />
          <fs_chat_history
           visibility_control="FSShowMutedChatHistory"
           font="SansSerifSmall"
           follows="all"
           name="chat_history_muted"
           parse_highlights="true"
           parse_urls="true"
           right="-4"
           left="0"
           top="0"
           bottom="-1" />
        </layout_panel>
        <layout_panel
          height="20"
          visible="false"
          auto_resize="false"
          user_resize="false"
          name="unread_messages_holder">
          <icon
            follows="left|right"
            image_name="Toolbar_Middle_Off"
            left="3"
            name="unread_messages_background"
            top="0"
            height="20"
            right="-4"/>
          <text
            type="string"
            length="1"
            follows="left|top|right"
            font="SansSerif"
            layout="topleft"
            name="unread_messages_text"
            right="-4"
            left="6"
            height="14"
            bottom="-3">
            Unread Messages: [NUM]
          </text>
        </layout_panel>
        <layout_panel
          visibility_control="FSNearbyChatbar"
          tab_group="2"
          top_delta="0"
          height="26"
          bottom="-1"
          auto_resize="false"
          name="chat_layout_panel">
          <layout_stack
            animate="false"
            default_tab_group="2"
            follows="all"
            orientation="horizontal"
            name="input_panels"
            top="0"
            bottom="-1"
            left="0"
            right="0">
            <layout_panel
              name="input_editor_layout_panel"
              auto_resize="true"
              user_resize="false"
              top="0"
              bottom="-1">
              <chat_editor
               enabled_control="FSNearbyChatbar"
               layout="topleft"
               expand_lines_count="5"
               follows="left|right|bottom"
               font="SansSerifSmall"
               height="20"
               is_expandable="true"
               text_tentative_color="TextFgTentativeColor"
               name="chat_box"
               max_length="3070"
               spellcheck="true"
               tab_group="3"
               top="1"
               bottom="-2"
               left="4"
               right="-1"
               wrap="true" />
            </layout_panel>
            <layout_panel
              visibility_control="FSShowChatChannel"
              auto_resize="false"
              user_resize="false"
              name="input_button_layout_panel"
              width="66">
              <spinner
               layout="topleft"
               bottom="10"
               left="1"
               right="-1"
               height="24"
               dynamic_button_height="true"
               decimal_digits="0"
               follows="left|right|bottom"
               increment="1.00"
               initial_value="0"
               label=""
               label_width="29"
               max_val="2147483647"
               min_val="-2147483647"
               mouse_opaque="true"
               name="ChatChannel"
               tool_tip="Channel to send chat on. Enabled in Preferences -> Chat -> Firestorm -> Show channel selection in chat bar." />

            </layout_panel>
            <layout_panel
              visibility_control="FSShowChatType"
              auto_resize="false"
              user_resize="false"
              name="chat_type_layout_panel"
              width="85">

            <!-- Makeshift split button since LLSplitButton is broken -->
            <combo_box
              name="chat_type"
              layout="topleft"
              bottom="10"
              left="0"
              right="-2"
              height="24"
              follows="bottom|right"
              drop_down_button.image_pressed="PushButton_Off"
              drop_down_button.image_pressed_selected="PushButton_Off"
              drop_down_button.image_selected="PushButton_Off"
              drop_down_button.image_unselected="PushButton_Off"
              drop_down_button.halign="center"
              list_position="above"
              tool_tip="Whisper = 10m, Say = 20m, Shout = 100m">
              <combo_box.item
                name="chat_type_whisper"
                value="whisper"
                label="Whisper" />
              <combo_box.item
                name="chat_type_say"
                value="say"
                label="Say" />
              <combo_box.item
                name="chat_type_shout"
                value="shout"
                label="Shout" />
            </combo_box>
            <!-- pad_bottom used to move the button text away so it's invisible under the combo box -->
            <button
              image_unselected="transparent.j2c"
              image_selected="PushButton_Off"
              image_pressed="PushButton_Off"
              image_pressed_selected="transparent.j2c"
              image_disabled="transparent.j2c"
              layout="topleft"
              left_delta="0"
              right="-22"
              height="24"
              follows="bottom|left|right"
              label="Say"
              pad_bottom="-22"
              name="send_chat"
              tool_tip="Whisper = 10m, Say = 20m, Shout = 100m" />
            <icon
              name="chat_type_combo_arrow_icon"
              layout="topleft"
              left_pad="0"
              top_delta="1"
              width="18"
              height="20"
              follows="bottom|right"
              image_name="arrow_up.tga"
              scale_image="true" />
            <!-- Makeshift split button since LLSplitButton is broken -->

            </layout_panel>
          </layout_stack>
        </layout_panel>
      </layout_stack>
    </layout_panel>
  </layout_stack>
</floater>
